<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First-time Setup - AppFlowy Documentation</title>
    <link rel="stylesheet" href="assets/docs-style.css">
</head>
<body>
  <div class="docs-container">
    <aside class="docs-sidebar">
      <a href="index.html" class="docs-logo">
        <span style="font-size: 32px;">üìö</span>
        <h1>AppFlowy Docs</h1>
      </a>
      <div class="search-box">
        <input type="text" id="search-input" placeholder="Search documentation...">
      </div>
      <nav id="docs-nav" class="docs-nav"></nav>
    </aside>

    <main class="docs-main">
      <header class="docs-header">
        <div id="breadcrumb" class="breadcrumb"></div>
      </header>

      <article class="docs-content">
        <div class="header">
          <h1>üöÄ First-time Setup</h1>
          <p>Local development setup for Backend and Frontend</p>
        </div>

        <div class="card">
          <h2><span class="icon">üìã</span> Overview</h2>
          <p>Follow this guide to get both Backend and Frontend running locally for the first time. For detailed configuration options, see <a href="backend-configuration.html">Backend Configuration</a> and <a href="frontend-configuration.html">Frontend Configuration</a>.</p>
          
          <div class="alert info">
            <strong>üéØ Quick Start:</strong>
            <ol style="margin-left: 20px;">
              <li>Run <code>./script/generate_env.sh</code> to interactively create your <code>.env</code>.</li>
              <li>Start the local server via <code>./script/run_local_server.sh --reset --sqlx</code> (first-time setup).</li>
            </ol>
            <div style="margin-top:8px; font-size: 0.95rem;">
              <em>Note:</em> <code>--watch</code> is optional. When developing with AI assistance, avoid <code>--watch</code> as it may block the AI from running <code>cargo check</code>.
            </div>
            <div style="margin-top:8px; font-size: 0.95rem;">
              <em>Alternative:</em> Use <code>docker-compose -f docker-compose-dev.yml up</code> to bring up containers only.
            </div>
          </div>

          <h3>Backend ‚Äî First-time Setup</h3>
          <pre class="code-block"><code># Prepare SQLx metadata and reset DB (recommended on first run)
./script/run_local_server.sh --reset --sqlx

# Alternatively, reset DB only
./script/run_local_server.sh --reset</code></pre>

          <h3>Backend ‚Äî Required Environment Notes</h3>
          <p><strong>SSO:</strong> Google OAuth is required to enable SSO. Create OAuth credentials and place client ID/secret in your secrets file.</p>
          <pre class="code-block"><code># Enable Google OAuth (example)
GOTRUE_EXTERNAL_GOOGLE_ENABLED=true
GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID=your_google_client_id
GOTRUE_EXTERNAL_GOOGLE_SECRET=your_google_client_secret
GOTRUE_SITE_URL=http://localhost:3000

# Enable default plugins/features
SPACE_ACL_ENABLED=true
PROJECT_ACL_ENABLED=true</code></pre>

          <h3>Backend ‚Äî Ongoing Development</h3>
          <pre class="code-block"><code># Typical development run (no file watching)
./script/run_local_server.sh --sqlx

# Optional: watch mode (auto-rebuild on changes)
./script/run_local_server.sh --sqlx --watch</code></pre>
          <div class="alert warning">
            <strong>Watch mode caveat:</strong> <code>--watch</code> can hold the process, which may prevent AI tooling from invoking <code>cargo check</code>. When collaborating with AI, prefer running <code>--sqlx</code> without <code>--watch</code>.
          </div>

          <h3>Frontend ‚Äî First-time Setup</h3>
          <pre class="code-block"><code># From the frontend repository directory
pnpm install
pnpm run dev</code></pre>
          <p>Open <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> in your browser. For more details and scripts, see <a href="frontend-configuration.html">Frontend Configuration</a>.</p>
        </div>

        <div class="card">
          <h2><span class="icon">üß≠</span> Next Steps & Configuration</h2>
          <p>For all configuration details (environment files, flags, troubleshooting), see:</p>
          <ul>
            <li><a href="backend-configuration.html">Backend Configuration</a> ‚Äî environment files, commands, common settings</li>
            <li><a href="frontend-configuration.html">Frontend Configuration</a> ‚Äî scripts, Docker, and development tips</li>
          </ul>
        </div>
      </article>

      <footer class="docs-footer">
        <p>¬© 2025 AppFlowy. Built with ‚ù§Ô∏è for developers.</p>
      </footer>
    </main>
  </div>

  <script src="assets/docs-script.js"></script>
</body>
</html>